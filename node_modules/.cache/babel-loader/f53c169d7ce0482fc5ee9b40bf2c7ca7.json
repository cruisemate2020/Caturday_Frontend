{"ast":null,"code":"import _objectSpread from\"/Users/imagine/IronHackWDPT/Final_Project_Final_Deployment/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _defineProperty from\"/Users/imagine/IronHackWDPT/Final_Project_Final_Deployment/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/imagine/IronHackWDPT/Final_Project_Final_Deployment/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/imagine/IronHackWDPT/Final_Project_Final_Deployment/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/imagine/IronHackWDPT/Final_Project_Final_Deployment/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/imagine/IronHackWDPT/Final_Project_Final_Deployment/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import axios from\"axios\";import React,{Component}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var RescueStories=/*#__PURE__*/function(_Component){_inherits(RescueStories,_Component);var _super=_createSuper(RescueStories);function RescueStories(){var _this;_classCallCheck(this,RescueStories);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={name:\"\",age:\"\",breed:\"\",story:\"\",imageUrl:\"\",listOfStories:[],loggedInUser:null,hidden:true};_this.deleteStory=function(id){axios.delete(\"http://localhost:5000/api/rescue-story/delete/\".concat(id)).then(function(){console.log(\"deleted frontend\");}).catch(function(err){return console.log(err);});_this.props.history.push(\"/\");};_this.showAllStories=function(){return _this.state.listOfStories.map(function(eachStory){return/*#__PURE__*/_jsxs(\"div\",{className:\"cat\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"rescueImg\",src:eachStory.imageUrl,alt:\"Cat Pic\"}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{className:\"attributes\",children:\"Name:\"}),\" \",eachStory.name,/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{className:\"attributes\",children:\"Age:\"}),\" \",eachStory.age,/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{className:\"attributes\",children:\"Breed:\"}),\" \",eachStory.breed,/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{className:\"attributes\",children:\"Story:\"}),\" \",eachStory.story,/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{className:\"attributes\",children:\"Made by:\"}),\" \",eachStory.userId.username,/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"br\",{})]},eachStory._id);});};_this.handleSubmit=function(e){e.preventDefault();axios.post(\"http://localhost:5000/api/rescue-story\",_this.state,{withCredentials:true});_this.props.history.push(\"/\");};_this.handleChange=function(e){_this.setState(_defineProperty({},e.target.name,e.target.value));};_this.handleFileChange=function(e){var file=e.target.files[0];console.log(\"Image file\",file);};_this.showForm=function(){_this.setState({hidden:!_this.state.hidden});};return _this;}_createClass(RescueStories,[{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(nextProps){this.setState(_objectSpread(_objectSpread({},this.state),{},{loggedInUser:nextProps[\"userInSession\"]}));}},{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;axios.get(\"http://localhost:5000/api/rescue-story\").then(function(response){_this2.setState({listOfStories:response.data});});}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Rescue Stories\"}),this.state.loggedInUser&&/*#__PURE__*/_jsx(\"button\",{onClick:this.showForm,children:\"Add story\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.handleSubmit,hidden:this.state.hidden,children:[/*#__PURE__*/_jsx(\"input\",{onChange:this.handleChange,type:\"text\",name:\"name\",placeholder:\"Cat's Name\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{onChange:this.handleChange,type:\"number\",name:\"age\",placeholder:\"Age\"}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{onChange:this.handleChange,type:\"text\",name:\"breed\",placeholder:\"Breed\"}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{children:\"Tell your cat's story:\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"textarea\",{onChange:this.handleChange,name:\"story\",cols:\"80\",rows:\"10\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{children:\"Show off your beautiful Furbaby!\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"imageUrl\",onChange:this.handleFileChange}),/*#__PURE__*/_jsx(\"button\",{children:\"Submit\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"cat-grid\",children:this.showAllStories()})]});}}]);return RescueStories;}(Component);export default RescueStories;","map":{"version":3,"sources":["/Users/imagine/IronHackWDPT/Final_Project_Final_Deployment/frontend/src/components/RescueStories.js"],"names":["axios","React","Component","RescueStories","state","name","age","breed","story","imageUrl","listOfStories","loggedInUser","hidden","deleteStory","id","delete","then","console","log","catch","err","props","history","push","showAllStories","map","eachStory","userId","username","_id","handleSubmit","e","preventDefault","post","withCredentials","handleChange","setState","target","value","handleFileChange","file","files","showForm","nextProps","get","response","data"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport React, { Component } from \"react\";\n\nclass RescueStories extends Component {\n  state = {\n    name: \"\",\n    age: \"\",\n    breed: \"\",\n    story: \"\",\n    imageUrl: \"\",\n    listOfStories: [],\n    loggedInUser: null,\n    hidden: true,\n  };\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({ ...this.state, loggedInUser: nextProps[\"userInSession\"] });\n  }\n\n  componentDidMount() {\n    axios.get(\"http://localhost:5000/api/rescue-story\").then((response) => {\n      this.setState({\n        listOfStories: response.data,\n      });\n    });\n  }\n\n  deleteStory = (id) => {\n    axios\n      .delete(`http://localhost:5000/api/rescue-story/delete/${id}`)\n      .then(() => {\n        console.log(\"deleted frontend\");\n      })\n      .catch((err) => console.log(err));\n    this.props.history.push(\"/\");\n  };\n\n  showAllStories = () => {\n    return this.state.listOfStories.map((eachStory) => {\n      return (\n        <div className=\"cat\" key={eachStory._id}>\n          <img className=\"rescueImg\" src={eachStory.imageUrl} alt=\"Cat Pic\" />{\" \"}\n          <br />\n          <span className=\"attributes\">Name:</span> {eachStory.name}\n          <br /> <br />\n          <span className=\"attributes\">Age:</span> {eachStory.age}\n          <br /> <br />\n          <span className=\"attributes\">Breed:</span> {eachStory.breed}\n          <br /> <br />\n          <span className=\"attributes\">Story:</span> {eachStory.story}\n          <br /> <br />\n          <span className=\"attributes\">Made by:</span>{\" \"}\n          {eachStory.userId.username}\n          <br /> <br />\n        </div>\n      );\n    });\n  };\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n    axios.post(\"http://localhost:5000/api/rescue-story\", this.state, {\n      withCredentials: true,\n    });\n    this.props.history.push(\"/\");\n  };\n\n  handleChange = (e) => {\n    this.setState({ [e.target.name]: e.target.value });\n  };\n\n  handleFileChange = (e) => {\n    const file = e.target.files[0];\n    console.log(\"Image file\", file);\n  };\n\n  showForm = () => {\n    this.setState({ hidden: !this.state.hidden });\n  };\n\n  render() {\n    return (\n      <div>\n        <h1>Rescue Stories</h1>\n        {this.state.loggedInUser && (\n          <button onClick={this.showForm}>Add story</button>\n        )}\n        <form onSubmit={this.handleSubmit} hidden={this.state.hidden}>\n          <input\n            onChange={this.handleChange}\n            type=\"text\"\n            name=\"name\"\n            placeholder=\"Cat's Name\"\n          />\n          <br />\n          <input\n            onChange={this.handleChange}\n            type=\"number\"\n            name=\"age\"\n            placeholder=\"Age\"\n          />{\" \"}\n          <br />\n          <input\n            onChange={this.handleChange}\n            type=\"text\"\n            name=\"breed\"\n            placeholder=\"Breed\"\n          />{\" \"}\n          <br />\n          <label>Tell your cat's story:</label>\n          <br />\n          <textarea\n            onChange={this.handleChange}\n            name=\"story\"\n            cols=\"80\"\n            rows=\"10\"\n          ></textarea>\n          <br />\n          <label>Show off your beautiful Furbaby!</label>\n          <br />\n          <input type=\"file\" name=\"imageUrl\" onChange={this.handleFileChange} />\n          <button>Submit</button>\n        </form>\n        <p className=\"cat-grid\">{this.showAllStories()}</p>\n      </div>\n    );\n  }\n}\n\nexport default RescueStories;\n"]},"metadata":{},"sourceType":"module"}