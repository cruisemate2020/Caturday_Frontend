{"ast":null,"code":"import _defineProperty from\"/Users/imagine/IronHackWDPT/Final_Project_Final_Deployment/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/imagine/IronHackWDPT/Final_Project_Final_Deployment/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/imagine/IronHackWDPT/Final_Project_Final_Deployment/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/imagine/IronHackWDPT/Final_Project_Final_Deployment/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/imagine/IronHackWDPT/Final_Project_Final_Deployment/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PetFinderSearch=/*#__PURE__*/function(_Component){_inherits(PetFinderSearch,_Component);var _super=_createSuper(PetFinderSearch);function PetFinderSearch(){var _this;_classCallCheck(this,PetFinderSearch);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={location:\"\",rescueCats:[]};_this.giveData=function(){var key=\"Ww2Mo8xNzXhbFxBtwEN3er2rnOqCUAmamXIQ1AhdCA0Yd4ueb1\";var secret=\"EkIYCERn1x0yevjN5f1VPwEXgaP7pNQ07s3bBBG7\";// Call details\nvar type=\"cat\";var status=\"adoptable\";var location=_this.state.location;// Call the API\n// This is a POST request, because we need the API to generate a new token for us\nfetch(\"https://api.petfinder.com/v2/oauth2/token\",{method:\"POST\",body:\"grant_type=client_credentials&client_id=\"+key+\"&client_secret=\"+secret,headers:{\"Content-Type\":\"application/x-www-form-urlencoded\"}}).then(function(resp){// Return the response as JSON\nreturn resp.json();}).then(function(data){// Log the API data\n// Return a second API call\n// This one uses the token we received for authentication\nreturn fetch(\"https://api.petfinder.com/v2/animals?type=\"+type+\"&status=\"+status+\"&location=\"+location,{headers:{Authorization:data.token_type+\" \"+data.access_token,\"Content-Type\":\"application/x-www-form-urlencoded\"}});}).then(function(resp){// Return the API response as JSON\nreturn resp.json();}).then(function(data){_this.setState({rescueCats:data.animals});}).catch(function(err){// Log any errors\nconsole.log(\"something went wrong\",err);});};_this.handleSubmit=function(e){e.preventDefault();_this.giveData();};_this.handleLocation=function(e){_this.setState(_defineProperty({},e.target.name,e.target.value));};_this.allAvailableRescueCats=function(){return _this.state.rescueCats.map(function(eachRescueCat){var _eachRescueCat$primar;return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"cat\",children:[!eachRescueCat.primary_photo_cropped?/*#__PURE__*/_jsx(\"img\",{src:\"../images/home-is-where-the-cat-is.jpg\",alt:\"Home is where the cat is\"}):/*#__PURE__*/_jsx(\"img\",{src:(_eachRescueCat$primar=eachRescueCat.primary_photo_cropped)===null||_eachRescueCat$primar===void 0?void 0:_eachRescueCat$primar.small,alt:\" unavailable\",width:\"200vw\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"a\",{href:eachRescueCat.url,target:\"_blank\",rel:\"noreferrer\",children:eachRescueCat.name})]})},eachRescueCat._id);});};return _this;}_createClass(PetFinderSearch,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Adopt Your Own Cat Today!\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"location\",placeholder:\"City or Zip Code\",onChange:this.handleLocation}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Search\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"cat-grid\",children:this.allAvailableRescueCats()})]});}}]);return PetFinderSearch;}(Component);export{PetFinderSearch as default};","map":{"version":3,"sources":["/Users/imagine/IronHackWDPT/Final_Project_Final_Deployment/frontend/src/components/PetFinderSearch.js"],"names":["React","Component","PetFinderSearch","state","location","rescueCats","giveData","key","secret","type","status","fetch","method","body","headers","then","resp","json","data","Authorization","token_type","access_token","setState","animals","catch","err","console","log","handleSubmit","e","preventDefault","handleLocation","target","name","value","allAvailableRescueCats","map","eachRescueCat","primary_photo_cropped","small","url","_id"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nexport default class PetFinderSearch extends Component {\n  state = {\n    location: \"\",\n    rescueCats: [],\n  };\n\n  giveData = () => {\n    let key = \"Ww2Mo8xNzXhbFxBtwEN3er2rnOqCUAmamXIQ1AhdCA0Yd4ueb1\";\n    let secret = \"EkIYCERn1x0yevjN5f1VPwEXgaP7pNQ07s3bBBG7\";\n\n    // Call details\n    const type = \"cat\";\n    const status = \"adoptable\";\n    let location = this.state.location;\n\n    // Call the API\n    // This is a POST request, because we need the API to generate a new token for us\n    fetch(\"https://api.petfinder.com/v2/oauth2/token\", {\n      method: \"POST\",\n      body:\n        \"grant_type=client_credentials&client_id=\" +\n        key +\n        \"&client_secret=\" +\n        secret,\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\",\n      },\n    })\n      .then((resp) => {\n        // Return the response as JSON\n        return resp.json();\n      })\n      .then((data) => {\n        // Log the API data\n\n        // Return a second API call\n        // This one uses the token we received for authentication\n        return fetch(\n          \"https://api.petfinder.com/v2/animals?type=\" +\n            type +\n            \"&status=\" +\n            status +\n            \"&location=\" +\n            location,\n          {\n            headers: {\n              Authorization: data.token_type + \" \" + data.access_token,\n              \"Content-Type\": \"application/x-www-form-urlencoded\",\n            },\n          }\n        );\n      })\n      .then((resp) => {\n        // Return the API response as JSON\n        return resp.json();\n      })\n      .then((data) => {\n        this.setState({ rescueCats: data.animals });\n      })\n      .catch((err) => {\n        // Log any errors\n        console.log(\"something went wrong\", err);\n      });\n  };\n  handleSubmit = (e) => {\n    e.preventDefault();\n    this.giveData();\n  };\n\n  handleLocation = (e) => {\n    this.setState({ [e.target.name]: e.target.value });\n  };\n\n  allAvailableRescueCats = () => {\n    return this.state.rescueCats.map((eachRescueCat) => {\n      return (\n        <div key={eachRescueCat._id}>\n          <div className=\"cat\">\n            {!eachRescueCat.primary_photo_cropped ? (\n              <img\n                src=\"../images/home-is-where-the-cat-is.jpg\"\n                alt=\"Home is where the cat is\"\n              />\n            ) : (\n              <img\n                src={eachRescueCat.primary_photo_cropped?.small}\n                alt=\" unavailable\"\n                width=\"200vw\"\n              />\n            )}\n            <br />\n            <a href={eachRescueCat.url} target=\"_blank\" rel=\"noreferrer\">\n              {eachRescueCat.name}\n            </a>\n          </div>\n        </div>\n      );\n    });\n  };\n\n  render() {\n    return (\n      <div>\n        <h1>Adopt Your Own Cat Today!</h1>\n        <form onSubmit={this.handleSubmit}>\n          <input\n            type=\"text\"\n            name=\"location\"\n            placeholder=\"City or Zip Code\"\n            onChange={this.handleLocation}\n          />\n          <button type=\"submit\">Search</button>\n        </form>\n        <div className=\"cat-grid\">{this.allAvailableRescueCats()}</div>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}