{"ast":null,"code":"var _jsxFileName = \"/Users/imagine/IronHackWDPT/Final_Project/everyday-caturday/frontend/src/components/PetFinderSearch.js\";\nimport React, { Component } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class PetFinderSearch extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      location: \"\",\n      rescueCats: []\n    };\n\n    this.giveData = () => {\n      let key = \"Ww2Mo8xNzXhbFxBtwEN3er2rnOqCUAmamXIQ1AhdCA0Yd4ueb1\";\n      let secret = \"EkIYCERn1x0yevjN5f1VPwEXgaP7pNQ07s3bBBG7\"; // Call details\n\n      const type = \"cat\";\n      const status = \"adoptable\";\n      let location = this.state.location; // Call the API\n      // This is a POST request, because we need the API to generate a new token for us\n\n      fetch(\"https://api.petfinder.com/v2/oauth2/token\", {\n        method: \"POST\",\n        body: \"grant_type=client_credentials&client_id=\" + key + \"&client_secret=\" + secret,\n        headers: {\n          \"Content-Type\": \"application/x-www-form-urlencoded\"\n        }\n      }).then(resp => {\n        // Return the response as JSON\n        return resp.json();\n      }).then(data => {\n        // Log the API data\n        // console.log(\"token\", data);\n        console.log(location); // Return a second API call\n        // This one uses the token we received for authentication\n\n        return fetch(\"https://api.petfinder.com/v2/animals?type=\" + type + \"&status=\" + status + \"&location=\" + location, {\n          headers: {\n            Authorization: data.token_type + \" \" + data.access_token,\n            \"Content-Type\": \"application/x-www-form-urlencoded\"\n          }\n        });\n      }).then(resp => {\n        // Return the API response as JSON\n        console.log(\"------->\", resp);\n        return resp.json();\n      }).then(data => {\n        // Log the pet data\n        console.log(\"pets\", data.animals); // console.log('1-1-1-1-', this.state);\n\n        this.setState({\n          rescueCats: data.animals\n        });\n        console.log(this.state);\n      }).catch(err => {\n        // Log any errors\n        console.log(\"something went wrong\", err);\n      });\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      this.giveData();\n    };\n\n    this.handleLocation = e => {\n      // console.log(\"hello: \", e.target.name, \"0-0-0-0-0-\", e.target.value);\n      this.setState({\n        [e.target.name]: e.target.value\n      }, () => console.log(\"--------->\", this.state));\n    };\n\n    this.allAvailableRescueCats = () => {\n      return this.state.rescueCats.map(eachRescueCat => {\n        var _eachRescueCat$primar;\n\n        console.log(eachRescueCat.image);\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cat\",\n            children: [!eachRescueCat.primary_photo_cropped ? /*#__PURE__*/_jsxDEV(\"img\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 55\n            }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n              src: (_eachRescueCat$primar = eachRescueCat.primary_photo_cropped) === null || _eachRescueCat$primar === void 0 ? void 0 : _eachRescueCat$primar.small,\n              alt: \" unavailable\",\n              width: \"200vw\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 77\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n              href: eachRescueCat.url,\n              target: \"_blank\",\n              rel: \"noreferrer\",\n              children: eachRescueCat.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 11\n          }, this)\n        }, eachRescueCat._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 9\n        }, this);\n      });\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: this.handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"location\",\n          placeholder: \"City or Zip Code\",\n          onChange: this.handleLocation\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: \"Search\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cat-grid\",\n        children: this.allAvailableRescueCats()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/imagine/IronHackWDPT/Final_Project/everyday-caturday/frontend/src/components/PetFinderSearch.js"],"names":["React","Component","PetFinderSearch","state","location","rescueCats","giveData","key","secret","type","status","fetch","method","body","headers","then","resp","json","data","console","log","Authorization","token_type","access_token","animals","setState","catch","err","handleSubmit","e","preventDefault","handleLocation","target","name","value","allAvailableRescueCats","map","eachRescueCat","image","primary_photo_cropped","small","url","_id","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nexport default class PetFinderSearch extends Component {\n  state = {\n    location: \"\",\n    rescueCats: [],\n  };\n\n  giveData = () => {\n    let key = \"Ww2Mo8xNzXhbFxBtwEN3er2rnOqCUAmamXIQ1AhdCA0Yd4ueb1\";\n    let secret = \"EkIYCERn1x0yevjN5f1VPwEXgaP7pNQ07s3bBBG7\";\n\n    // Call details\n    const type = \"cat\";\n    const status = \"adoptable\";\n    let location = this.state.location;\n\n    // Call the API\n    // This is a POST request, because we need the API to generate a new token for us\n    fetch(\"https://api.petfinder.com/v2/oauth2/token\", {\n      method: \"POST\",\n      body:\n        \"grant_type=client_credentials&client_id=\" +\n        key +\n        \"&client_secret=\" +\n        secret,\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\",\n      },\n    })\n      .then((resp) => {\n        // Return the response as JSON\n        return resp.json();\n      })\n      .then((data) => {\n        // Log the API data\n        // console.log(\"token\", data);\n        console.log(location);\n\n        // Return a second API call\n        // This one uses the token we received for authentication\n        return fetch(\n          \"https://api.petfinder.com/v2/animals?type=\" +\n            type +\n            \"&status=\" +\n            status +\n            \"&location=\" +\n            location,\n          {\n            headers: {\n              Authorization: data.token_type + \" \" + data.access_token,\n              \"Content-Type\": \"application/x-www-form-urlencoded\",\n            },\n          }\n        );\n      })\n      .then((resp) => {\n        // Return the API response as JSON\n        console.log(\"------->\", resp);\n        return resp.json();\n      })\n      .then((data) => {\n        // Log the pet data\n        console.log(\"pets\", data.animals);\n        // console.log('1-1-1-1-', this.state);\n        this.setState({ rescueCats: data.animals });\n        console.log(this.state);\n      })\n      .catch((err) => {\n        // Log any errors\n        console.log(\"something went wrong\", err);\n      });\n  };\n  handleSubmit = (e) => {\n    e.preventDefault();\n    this.giveData();\n  };\n\n  handleLocation = (e) => {\n    // console.log(\"hello: \", e.target.name, \"0-0-0-0-0-\", e.target.value);\n    this.setState({ [e.target.name]: e.target.value }, () =>\n      console.log(\"--------->\", this.state)\n    );\n  };\n\n  allAvailableRescueCats = () => {\n    return this.state.rescueCats.map((eachRescueCat) => {\n      console.log(eachRescueCat.image);\n      return (\n        <div key={eachRescueCat._id}>\n          <div className=\"cat\">\n            {(!eachRescueCat.primary_photo_cropped) ? <img></img> :         <img\n              src={eachRescueCat.primary_photo_cropped?.small}\n              alt=\" unavailable\"\n              width=\"200vw\"\n            />}\n            <br />\n            <a href={eachRescueCat.url} target=\"_blank\" rel=\"noreferrer\">\n              {eachRescueCat.name}\n            </a>\n          </div>\n        </div>\n      );\n    });\n  };\n\n  render() {\n    return (\n      <div>\n        <form onSubmit={this.handleSubmit}>\n          <input\n            type=\"text\"\n            name=\"location\"\n            placeholder=\"City or Zip Code\"\n            onChange={this.handleLocation}\n          />\n          <button type=\"submit\">Search</button>\n        </form>\n        <div className=\"cat-grid\">{this.allAvailableRescueCats()}</div>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}