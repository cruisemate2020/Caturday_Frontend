{"ast":null,"code":"import _objectSpread from\"/Users/imagine/IronHackWDPT/Final_Project_Final_Deployment/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _defineProperty from\"/Users/imagine/IronHackWDPT/Final_Project_Final_Deployment/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/imagine/IronHackWDPT/Final_Project_Final_Deployment/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/imagine/IronHackWDPT/Final_Project_Final_Deployment/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/imagine/IronHackWDPT/Final_Project_Final_Deployment/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/imagine/IronHackWDPT/Final_Project_Final_Deployment/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import axios from\"axios\";import*as service from\"../api/service\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AddStory=/*#__PURE__*/function(_Component){_inherits(AddStory,_Component);var _super=_createSuper(AddStory);function AddStory(){var _this;_classCallCheck(this,AddStory);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={loggedInUser:null,name:\"\",age:\"\",breed:\"\",story:\"\",imageUrl:\"\"};_this.handleSubmit=function(e){e.preventDefault();axios.post(\"\".concat(process.env.REACT_APP_SERVER_URL,\"/api/rescue-story\"),_this.state,{withCredentials:true}).then(function(){_this.props.history.push(\"/rescueStories\");}).catch(function(err){console.log(\"Error while adding the thing: \",err.response.data);});};_this.handleFileUpload=function(e){var uploadData=new FormData();uploadData.append(\"imageUrl\",e.target.files[0]);service.handleUpload(uploadData).then(function(response){_this.setState({imageUrl:response.secure_url});}).catch(function(err){console.log(\"Error while uploading the file: \",err);});};_this.handleChange=function(e){_this.setState(_defineProperty({},e.target.name,e.target.value));};return _this;}_createClass(AddStory,[{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(nextProps){this.setState(_objectSpread(_objectSpread({},this.state),{},{loggedInUser:nextProps[\"userInSession\"]}));console.log(this.state.loggedInUser);}},{key:\"componentDidMount\",value:function componentDidMount(){this.setState({loggedInUser:this.props.userInSession?this.props.userInSession:null});console.log(this.state);}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Add Your Cat's Story\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{onChange:this.handleChange,type:\"text\",name:\"name\",placeholder:\"Cat's Name\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{onChange:this.handleChange,type:\"number\",name:\"age\",placeholder:\"Age\"}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{onChange:this.handleChange,type:\"text\",name:\"breed\",placeholder:\"Breed\"}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{children:\"Tell your cat's story:\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"textarea\",{onChange:this.handleChange,name:\"story\",cols:\"80\",rows:\"10\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{children:\"Show off your beautiful Furbaby!\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:function onChange(e){return _this2.handleFileUpload(e);}}),/*#__PURE__*/_jsx(\"button\",{children:\"Submit\"})]})]});}}]);return AddStory;}(Component);export{AddStory as default};","map":{"version":3,"sources":["/Users/imagine/IronHackWDPT/Final_Project_Final_Deployment/frontend/src/components/AddStory.js"],"names":["React","Component","axios","service","AddStory","state","loggedInUser","name","age","breed","story","imageUrl","handleSubmit","e","preventDefault","post","process","env","REACT_APP_SERVER_URL","withCredentials","then","props","history","push","catch","err","console","log","response","data","handleFileUpload","uploadData","FormData","append","target","files","handleUpload","setState","secure_url","handleChange","value","nextProps","userInSession"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport * as service from \"../api/service\";\n\nexport default class AddStory extends Component {\n  state = {\n    loggedInUser: null,\n    name: \"\",\n    age: \"\",\n    breed: \"\",\n    story: \"\",\n    imageUrl: \"\",\n  };\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({ ...this.state, loggedInUser: nextProps[\"userInSession\"] });\n    console.log(this.state.loggedInUser);\n  }\n\n  componentDidMount() {\n    this.setState({\n      loggedInUser: this.props.userInSession ? this.props.userInSession : null,\n    });\n\n    console.log(this.state);\n  }\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n    axios\n      .post(`${process.env.REACT_APP_SERVER_URL}/api/rescue-story`, this.state, {\n        withCredentials: true,\n      })\n      .then(() => {\n        this.props.history.push(\"/rescueStories\");\n      })\n      .catch((err) => {\n        console.log(\"Error while adding the thing: \", err.response.data);\n      });\n  };\n\n  handleFileUpload = (e) => {\n    const uploadData = new FormData();\n    uploadData.append(\"imageUrl\", e.target.files[0]);\n    service\n      .handleUpload(uploadData)\n      .then((response) => {\n        this.setState({ imageUrl: response.secure_url });\n      })\n      .catch((err) => {\n        console.log(\"Error while uploading the file: \", err);\n      });\n  };\n\n  handleChange = (e) => {\n    this.setState({ [e.target.name]: e.target.value });\n  };\n\n  render() {\n    return (\n      <div>\n                <h1>\nAdd Your Cat's Story\n          </h1>\n        <form onSubmit={this.handleSubmit}>\n          <input\n            onChange={this.handleChange}\n            type=\"text\"\n            name=\"name\"\n            placeholder=\"Cat's Name\"\n          />\n          <br />\n          <input\n            onChange={this.handleChange}\n            type=\"number\"\n            name=\"age\"\n            placeholder=\"Age\"\n          />{\" \"}\n          <br />\n          <input\n            onChange={this.handleChange}\n            type=\"text\"\n            name=\"breed\"\n            placeholder=\"Breed\"\n          />{\" \"}\n          <br />\n          <label>Tell your cat's story:</label>\n          <br />\n          <textarea\n            onChange={this.handleChange}\n            name=\"story\"\n            cols=\"80\"\n            rows=\"10\"\n          ></textarea>\n          <br />\n          <label>Show off your beautiful Furbaby!</label>\n          <br />\n          <input type=\"file\" onChange={(e) => this.handleFileUpload(e)} />\n          <button>Submit</button>\n        </form>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}